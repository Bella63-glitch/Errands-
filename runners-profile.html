<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Runner Profile</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-64SH312S1V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-64SH312S1V');
    </script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --maroon: #7B1E3A;
            --gold: #FFD700;
        }
        .bg-maroon { background-color: var(--maroon); }
        .text-gold { color: var(--gold); }
        .bg-gold { background-color: var(--gold); }
        .bg-maroon-dark { background-color: #66182f; }
        body {
            font-family: sans-serif;
        }
        .profile-card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 2rem;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans min-h-screen flex flex-col">

    <header class="bg-maroon shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center py-5 px-6">
            <a href="/" class="flex items-center space-x-2">
                <img src="https://i.postimg.cc/d1z9KLkL/ei-1752053865516-removebg-preview.png" alt="Errand Logo" class="h-20 md:h-24 w-auto">
                <h1 class="text-3xl md:text-5xl font-bold text-white transition-colors duration-300 hover:text-gold" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.4);"><strong>Run Me An Errand</strong></h1>
            </a>
            </div>
    </header>

    <main class="flex-grow flex justify-center items-center p-4">
        <div id="loading" class="text-center text-maroon text-2xl font-bold" style="display:none;">
            Loading runner profile...
        </div>
        <div id="profileContent" class="profile-card w-full max-w-4xl my-8" style="display:none;">
            <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-8 mb-8">
                <div class="flex-shrink-0">
                    <img id="profilePictureImg" src="https://via.placeholder.com/150" alt="Runner Profile Picture" class="w-32 h-32 rounded-full object-cover border-4 border-gold shadow-md">
                </div>
                <div class="text-center md:text-left flex-grow">
                    <h2 id="runnerName" class="text-4xl font-bold text-maroon"></h2>
                    <p class="text-lg text-gray-600 mb-2">Runner</p>
                    <div class="flex items-center justify-center md:justify-start space-x-2">
                        <span id="availabilityStatus" class="rounded-full h-3 w-3 block"></span>
                        <p id="availabilityText" class="font-semibold"></p>
                    </div>
                </div>
                <div class="flex-shrink-0">
                    <button id="hireButton" class="bg-maroon text-gold font-bold py-3 px-6 rounded-md hover:bg-maroon-dark transition-colors duration-300">
                        Hire Runner
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-bold text-maroon mb-4">About Me</h3>
                    <p id="runnerAbout" class="text-gray-700 leading-relaxed mb-6"></p>

                    <h3 class="text-2xl font-bold text-maroon mb-4">Experience & Services</h3>
                    <p id="runnerExperience" class="text-gray-700 leading-relaxed"></p>
                </div>

                <div>
                    <h3 class="text-2xl font-bold text-maroon mb-4">Contact & Availability</h3>
                    <div class="space-y-4 text-gray-700">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-map-marker-alt text-maroon text-xl"></i>
                            <span id="runnerLocation"></span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-envelope text-maroon text-xl"></i>
                            <span id="runnerEmail"></span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-phone text-maroon text-xl"></i>
                            <span id="runnerPhone"></span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-clock text-maroon text-xl"></i>
                            <span id="runnerAvailability"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="errorMessage" class="text-center text-red-500 text-2xl font-bold" style="display:none;">
            Runner not found. Please check the ID.
        </div>
    </main>

    <footer class="bg-gray-800 text-gray-300 py-6 mt-auto">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <p class="text-sm">Â© 2025 Run Me An Errand. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const APP_ID = "9223CBD1-9AFC-4C74-B56B-12F11D319DF9";
        const API_KEY = "0C3700EB-013B-4BFE-85ED-CE0F6F7EC013";

        document.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            const runnerId = params.get('id');
            if (runnerId) {
                fetchRunnerData(runnerId);
            } else {
                showError("No runner ID provided in the URL.");
            }
        });

        async function fetchRunnerData(runnerId) {
            document.getElementById("loading").style.display = "block";
            try {
                const response = await fetch(`https://api.backendless.com/${APP_ID}/${API_KEY}/data/users/${runnerId}`);
                if (!response.ok) {
                    throw new Error('Failed to fetch data');
                }
                const runner = await response.json();
                
                if (runner) {
                    populateProfile(runner);
                } else {
                    showError("Runner not found.");
                }
            } catch (error) {
                console.error("Error fetching runner data:", error);
                showError("Failed to load runner data. Please try again later.");
            } finally {
                document.getElementById("loading").style.display = "none";
            }
        }

        function populateProfile(runner) {
            document.getElementById("profilePictureImg").src = runner.profilepicture || 'https://via.placeholder.com/150';
            document.getElementById("runnerName").textContent = runner.name;
            document.getElementById("runnerAbout").textContent = runner.about || 'This runner has not provided a bio yet.';
            document.getElementById("runnerExperience").textContent = runner.experience || 'No experience details provided.';
            document.getElementById("runnerLocation").textContent = `Location: ${runner.location}`;
            document.getElementById("runnerEmail").textContent = `Email: ${runner.email}`;
            document.getElementById("runnerPhone").textContent = `Phone: ${runner.phone}`;
            document.getElementById("runnerAvailability").textContent = `Availability: ${runner.availability}`;

            const status = document.getElementById("availabilityStatus");
            const statusText = document.getElementById("availabilityText");
            if (runner.isavailable) {
                status.classList.add("bg-green-500");
                statusText.textContent = "Available";
                statusText.classList.add("text-green-600");
            } else {
                status.classList.add("bg-red-500");
                statusText.textContent = "Unavailable";
                statusText.classList.add("text-red-600");
            }

            // Show the profile content
            document.getElementById("profileContent").style.display = "block";
        }

        function showError(message) {
            const errorMessage = document.getElementById("errorMessage");
            errorMessage.textContent = message;
            errorMessage.style.display = "block";
            document.getElementById("profileContent").style.display = "none";
        }

        // Example for hire button functionality
        document.getElementById("hireButton").addEventListener("click", () => {
            const runnerName = document.getElementById("runnerName").textContent;
            alert(`You are about to hire ${runnerName}. This would lead to a new page or a pop-up.`);
        });
    </script>
</body>
</html>
